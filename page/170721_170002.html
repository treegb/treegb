<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../css/css_coreNote_001.css">
<link rel="shortcut icon" href="../img/treegb_icon.ico">
<title>Debian installation</title>
</head>

<style type="text/css">
</style>

<body>

<header>
    <h1>Debian installation</h1>
    <div class="subtitle">
        <p>170721_170002</p>
        <p><iframe src="./170721_194059.html" class="ifrmRefDest"></iframe></p>
    </div>
</header>

<section class="section1" id="toc">
    <h2><iframe class="ifrmRefDest" src="170723_110344.html"></iframe></h2>

    <div class="foldableContent">
        <ul>
            <li><strong class="lihed"><a href="#d170722_224712">Nav.</a></strong></li>
            <li>
                <p><strong class="lihed"><a href="https://www.debian.org/releases/stable/amd64/">Debian amd64 installation guide (official)</a></strong> : Very well wroted document. Have lots of information and every important thing you need to know, including complete path to install Debian, and understand Debian system.</p>
                <p>This single root have too many useful sublinks, thus I gather some important one here.</p>
                <div class="cbk1 hide">
                    <ul>
                        <li><strong class="lihed">Finding Sources of Hardware Information<a class="ancrDest" id="d170808_095225"></a></strong> : <a href="https://www.debian.org/releases/stable/amd64/ch03s03.html.en">3.3. Information You Will Need</a>, <a href="https://wiki.debian.org/HowToIdentifyADevice/PCI">HowToIdentifyADevice - PCI</a>.</li>
                        <li><strong class="lihed">Systems with UEFI firmware.</strong> : <a href="https://www.debian.org/releases/stable/amd64/ch03s06.html.en#UEFI">3.6. Pre-Installation Hardware and Operating System Setup.</a></li>
                        <li>
                            <p><strong class="lihed">Firmware</strong> : <a href="https://www.debian.org/releases/stable/amd64/ch02s02.html.en">2.2. Devices Requiring Firmware</a>, <a href="https://www.debian.org/releases/stable/amd64/ch06s04.html.en">6.4. Loading Missing Firmware</a>.</p>
                            <ul>
                                <li>Put extra firmware on second USB stick, under ["root" // /firmware] directory, and <b class="code1">debian-installer</b> will recognize it.</li>
                                <li>If the firmware was loaded from loose firmware files, the firmware copied to the installed system will not be automatically updated unless the corresponding firmware package (if available) is installed after the installation is completed.</li>
                                <li>See more at <a href="#d170811_120814">module (firmware)</a> section.</li>
                            </ul>
                        </li>
                        <li><strong class="lihed">USB media installation<a class="ancrDest" id="d170808_170152"></a></strong> : <a href="https://www.debian.org/releases/stable/amd64/ch04s03.html.en">4.3. Preparing Files for USB Memory Stick Booting</a>, <a href="https://www.debian.org/releases/stable/amd64/ch04s04.html.en">4.4. Preparing Files for Hard Disk Booting</a>. _ Also see <a href="#d170722_231432"><b class="code1">USB installation</b> section</a>.</li>
                        <li><strong class="lihed">[Boot Parameter / Kernel parameter]</strong> : <a href="https://www.debian.org/releases/stable/amd64/ch05s03.html.en">5.3. Boot Parameters.</a> Also see <a href="#d170808_074846">here</a>.</li>
                        <li><strong class="lihed"><b class="code1">dhcp-client</b>, <b class="code1">debootstrap</b>, <b class="code1">tasksel</b></strong> : See <a href="https://www.debian.org/releases/stable/amd64/ch03s01.html.en">here</a>.</li>
                        <li><strong class="lihed"><a href="https://www.debian.org/releases/stable/amd64/ch05s04.html.en">5.4. Troubleshooting the Installation Process.</a></strong></li>
                        <li>
                            <p><strong class="lihed"><b class="code1">Debian Installer</b></strong> : <a href="https://www.debian.org/releases/stable/amd64/ch06.html.en">Chapter 6. Using the Debian Installer</a>.</p>
                            <ul>
                                <li><strong class="lihed"><a href="https://www.debian.org/releases/stable/amd64/ch06s02.html.en">6.2. Components Introduction</a></strong> : Not much to notice, but I wonder <q>cdrom-detect</q> or <q>iso-scan</q> might able to load second usb and extra firmware inside it?</li>
                                <li><strong class="lihed"><a href="https://www.debian.org/releases/stable/amd64/ch06s03.html.en">6.3. Using Individual Components</a></strong> : More detail "components" descrition.</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </li>
            <li><strong class="lihed"><a href="https://www.debian.org/doc/books">Debian book</a></strong> : This link is just under <b class="udr">https://www.debian.org/</b> and I just always missed it until now! English version (<b class="udr"><a href="https://debian-handbook.info">https://debian-handbook.info</a></b>) is enough to read, this is <b class="strong1">very detailed manual</b> compared to official Debian installation guide.</li>
            <li><strong class="lihed"><a href="https://wiki.debian.org/FrontPage">Debian wiki</a></strong> : This is potential another good root resources.</li>
            <li>
                <p><strong class="lihed">[Mirror // archive].<a class="ancrDest" id="d170808_144245"></a></strong></p>
                <div class="cbk1 hide">
                    <ul>
                        <li><strong class="lihed">The term</strong> : <b class="udr">mirror</b> seems to indicate the [http // ftp] mirror site, where you can get [CD // DVD // live-CD // Kernel], and <b class="udr">archive</b> seems ot indicate old stuff, such as old-stable related.</li>
                        <li><strong class="lihed">Mirrors</strong> : I'm confused at first when I can't find something other than CD, DVD, live-CD image when I try navigating inside "directory" in some official link (for example following <b class="udr"><a href="https://www.debian.org/CD/">https://www.debian.org/CD/</a></b> page, I finally get to <b class="udr"><a href="https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/">https://cdimage.debian.org/debian-cd/current/amd64/iso-cd/</a></b> "directory", but I can't get to the parent of path <b class="code1">/debian-cd/</b>!). So if you want to explore all the resources (for example Kernel, namely <b class="code1">vmlinuz</b> and <b class="code1">initrd</b>) use this <b class="strong1"><a href="https://www.debian.org/mirror/list">full mirror links</a></b> to get complete resources. And also <b class="strong1"><a href="http://cdimage.debian.org/mirror/">http://cdimage.debian.org/mirror/</a></b> is Debian primary official mirror site.</li>
                        <li><strong class="lihed">Mirrors path structure</strong> : All mirrors site have similar structure but might be a little different, <b class="code1">/debian-cd/</b> and <b class="code1">/cdimage/</b> contains [CD // DVD // live-CD] file (these 2 contain identical data?), and <b class="code1">/debian/dists/</b> contains Kernel files.</li>
                        <li><strong class="lihed">Some mirror are outdate and don't have complete files on it</strong> : See <a href="https://www.debian.org/CD/http-ftp/#mirrors">here</a>. <q>Note that some mirrors are not up to date — before downloading, check the version number of the images is the same as the one listed on this site! Additionally, note that many sites do not mirror the full set of images (especially the DVD images) due to its size. If in doubt, use the primary CD image server in Sweden, or try the experimental automatic mirror selector that will automatically redirect you to a nearby mirror that is known to have the current version.</q></li>
                    </ul>
                </div>
            </li>
            <li><strong class="lihed"><a href="https://wiki.debian.org/Hardware">Debian Hardware guide.</a></strong></li>
            <li>
                <p><strong class="lihed">[GPU / Video card].</strong></p>
                <div class="cbk1">
                    <ul>
                        <li>
                            <p><strong class="lihed">Ubuntu and Mint (Debian please follow Debian way not this!)</strong></p>
                            <ul>
                                <li><strong class="lihed"><a href="https://sites.google.com/site/easylinuxtipsproject/12">NVIDIA - how to install the latest video card drivers.</a></strong></li>
                                <li><strong class="lihed"><a href="https://sites.google.com/site/easylinuxtipsproject/display">Solve display problems in Ubuntu and Linux Mint.</a></strong></li>
                            </ul>
                        </li>
                        <li><strong class="lihed"><b class="code1">/etc/X11/xorg.conf</b></strong> : In old days some people will change this file manually but I don't know if current day if this is still required. This file will be edited by NVIDIA automatic.</li>
                    </ul>
                </div>
            </li>
            <li><strong class="lihed"><a href="#d170722_231432">USB installation</a></strong></li>
            <li>
                <p><strong class="lihed">Kernel parameter.</strong><a class="ancrDest" id="d170808_074846"></p>
                <div class="cbk1 hide">
                    <ul>
                        <li><strong class="lihed"><a href="http://www.tldp.org/HOWTO/BootPrompt-HOWTO.html">The Linux BootPrompt-HowTo</a></strong> : <q>This is the BootPrompt-Howto, which is a compilation of all the possible boot time arguments that can be passed to the Linux kernel at boot time. A discussion of how the kernel sorts boot time arguments, along with an overview of some of the popular software used to boot Linux kernels is also included.</q></li>
                        <li><strong class="lihed">A long list of kernel paramenters</strong> : <q>Tip: For a list of kernel parameters, see kernel-parameters.rst and kernel-parameters.txt (still incomplete). For more examples of boot entries, see the GRUB upstream documentation or the documentation for the distribution you wish to boot.<cite><a href="https://wiki.archlinux.org/index.php/Multiboot_USB_drive#Boot_entries">Arch wiki.</a></q> _ Mostly only list, with little explain.
                        <li><strong class="lihed">Set kernel parameters <b class="udr">permanently</b> in Grub</strong> : <a href="https://wiki.archlinux.org/index.php/Kernel_parameters">1. (Syslinux, systemd-boot, GRUB ... ) (preferable)</a> <a href="https://sites.google.com/site/easylinuxtipsproject/gruboptions">2. (view as more info).</a></li>
                        <li><strong class="lihed">Format</strong> : No space are allowed in Kernel Parameter. And more surprisingly I found I can't even use quote, for example <b class="code1">username='treegb'</b> is not allowed and have to use <b class="code1">username=treegb</b>.</li>
                        <li><strong class="lihed"><a href="https://wiki.archlinux.org/index.php/kernel_mode_setting#Disabling_modesetting">Kernel mode setting</a></strong> : Kernel Mode Setting (KMS) is a method for setting display resolution and depth in the kernel space rather than user space.</li>
                        <li><strong class="lihed"><b class="code1">modeset</b></strong> : You may want to disable KMS for various reasons, such as getting a blank screen or a "no signal" error from the display.</li>
                        <li><strong class="lihed">[<b class="code1">nomodeset</b> // <b class="code1">quiet, splash</b> // <b class="code1">noacpi, nolacpi</b>]</strong> : See <a href="https://askubuntu.com/questions/716957/what-do-the-nomodeset-quiet-and-splash-kernel-parameters-mean">here</a>.</li>
                        <li><strong class="lihed"><b class="code1">fb=false</b></strong> : See <a href="https://www.debian.org/releases/stable/amd64/ch05s04.html.en">here (5.4.4)</a>, <q>If your screen begins to show a weird picture while the kernel boots, eg. pure white, pure black or colored pixel garbage, your system may contain a problematic video card which does not switch to the framebuffer mode properly. Then you can use the boot parameter fb=false to disable the framebuffer console.</q></li>
                        <li><strong class="lihed"><b class="code1">debconfig/priority</b></strong> : For <b class="code1">Debian-installer</b> only. See <a href="https://www.debian.org/releases/stable/amd64/ch06s01.html.en">6.1. How the Installer Works</a>, you can use <b class="code1">priority=medium</b>, <b class="code1">priority=low</b> to see more control options when using <b class="code1">Debian-installer</b>. Also this can be switch which <b class="code1">Debian-installer</b> interface, menu entry.</li>
                        <li><strong class="lihed"><a href="https://superuser.com/questions/385734/how-can-grub-pass-any-custom-variable-into-system-enviroment">Get kernel parameter passed to Grub when booting, after boot up</a></strong> : <b class="code1">/proc/cmdline</b>.</li>
                        <li><strong class="lihed"><b class="code1">username</b></strong> : Username for Debian live ISO OS after entering the system, for example <b class="code1">username=treegb</b>.</li>
                        <li><strong class="lihed"><b class="code1">rescue/enable</b></strong> : Not sure the purpose, maybe boot with single mode I don't know. e.g. <b class="code1">rescue/enable=true</b>.</li>
                        <li><strong class="lihed"><b class="code1">root</b></strong> : (I think this is not the same thing as <b class="code1">set root=(hd0,msdos1)</b> in <b class="code1">grub.cfg</b> but mean <b class="udr">file system root</b>, but I'm not sure). Set the <b class="udr">root of the filesystem</b>. Normally you don't need to set <b class="code1">root</b> because Kernel will assume <b class="udr">file system root</b> is same partition where <b class="code1">vmlinuz</b> locate. An usage example is <b class="code1">root=/dev/sda1</b>.</li>
                    </ul>
                </div>
            </li>
            <li>
                <p><strong class="lihed"><b class="code1">boot.img.gz</b>, <b class="code1">initrd.gz</b>, <b class="code1">vmlinuz</b></a></strong>.</p>
                <div class="cbk1 hide">
                    <ul>
                        <li><a href="http://www.linuxquestions.org/questions/linux-server-73/difference-between-initrd-and-vmlinuz-images-892868/">What is <b class="code1">vmlinuz</b> and <b class="code1">initrd</b>?</a> (vmlinuz is kernel, initrd is tiny file system image, will include some crucial modules and something more for vmlinuz to use).</li>
                        <li>For Debian, get those files at <a href="#d170808_144245">here</a> (you need to get deeper inside the tree to find it).</li>
                    </ul>
                </div>
            </li>
            <li><strong class="lihed"><a href="#d170809_133501">[Grub / Grub2 / bootloader].</a></strong></li>
            <li><strong class="lihed"><a href="https://zh.wikipedia.org/zh-tw/GUID%E7%A3%81%E7%A2%9F%E5%88%86%E5%89%B2%E8%A1%A8#.E6.93.8D.E4.BD.9C.E7.B3.BB.E7.BB.9F.E6.94.AF.E6.8C.81">OS support boot from [<b class="code1">BIOS/GPT</b> // <b class="code1">EFI/GPT</b>].</a></strong></li>
            <li>
                <p><strong class="lihed"><b class="code1">Debian installer</b>.</strong></p>
                <div class="cbk1">
                    <ul>
                        <li><b class="code1">Debian installer</b> is a utility, use and boot from <b class="code1">vmlinuz</b> and <b class="code1">initrd</b> (seems only need these 2 files), showing interface to install Debian OS, also offer extra shell to use (tty2).</li>
                        <li>
                            <p><strong class="lihed">Install <b class="code1">Debian installer</b></strong> : ISO image already have ability to run <b class="code1">Debian installer</b> natively, but here is a problem, if you are <b class="strong1">not</b> installed those ISO with dd command, which directly low level write ISO through USB, you get a <b class="code1">Debian installer</b> don't have <b class="code1">scan hard drive for an installer iso image</b> menu entry, even you use  <b class="code1">grub.cfg</b>, <b class="code1">linux  (loop)/d-i/vmlinuz $bootoptions</b>, <b class="code1">initrd (loop)/d-i/initrd.gz</b>, you still don't see it, I don't know why.</p>
                            <p><b class="code1">scan hard drive for an installer iso image</b> feature (a menu entry in <b class="code1">Debian installer</b>) will automatic scan all plugin device and search all direcotry checking if there is an Debian ISO file exist automatically, if you active this menu entry. If you have <b class="code1">Kernel parameter</b> <b class="code1">debconfig/priority=medium</b> set to <b class="code1">linux</b> in <b class="code1">grub.cfg</b>, later you can even manually select the device to scan ISO image, instead scaning all plugin device. After scaning extra ISO, you will find suddently there is much more extra menu entry added you are able to use much more feature (normally you should always have this feature or <b class="code1">Debian installer</b> will be pointless to use). Without this feature, you can't get full function to work in <b class="code1">Debian installer</b>.</p>
                            <p>Solution is, download extra <b class="code1">vmlinuz</b> and <b class="code1">initrd</b> on Debian mirrow, manually [put /copy] them to partition, and config <b class="code1">grub.cfg</b> to use them instead of <b class="code1">(loop)/d-i/vmlinuz</b> and <b class="code1">(loop)/d-i/initrd.gz</b>. Actually, you just have to [download / use] <b class="code1">initrd</b>, and use <b class="code1">(loop)/d-i/vmlinuz</b> as same, <b class="strong1">the key seems to be <b class="code1 strong1">initrd</b> only.</b></p>
                        </li>
                    </ul>
                </div>
            </li>
            <li>
                <p><strong class="lihed">Module.<a class="ancrDest" id="d170808_090536"></a></strong></p>
                <div class="cbk1 hide">
                    <ul>
                        <li><strong class="lihed"><b class="code1">modprobe</b>, <b class="code1">lsmod</b>, <b class="code1">modinfo</b>, <b class="code1">insmod</b>, <b class="code1">rmmod</b>, <b class="code1">depmod</b>.</strong></li>
                        <li><strong class="lihed"><a href="https://askubuntu.com/questions/299676/how-to-install-3rd-party-module-so-that-it-is-loaded-on-boot">Install 3rd party module and make it auto loaded on boot</a></strong> : In Debian, the path is at <b class="code1">/etc/modules-load.d/modules.conf</b>.</li>
                        <li><strong class="lihed"><a href="https://wiki.debian.org/KernelModuleBlacklisting">Blacklist Kernel Module</a>.</strong></li>
                        <li>
                            <p><strong class="lihed">Firmware<a class="ancrDest" id="d170811_120814"></a>.</strong></p>
                            <ul>
                                <li>
                                    <p>About loading module at boot time, I don't know if <b class="code1">module</b> is related with <b class="code1">firmware</b> or not, but these 2 seems different</p>
                                    <div class="cbk1">
                                        <p>(kernel module entity is at<br>
                                        <b class="code1">/lib/modules/`uname -r`/</b><br>
                                        but the firmware package is installed at<br>
                                        <b class="code1">/lib/firmware/</b><br>
                                        , and when I try this<br>
                                        <b class="code1">$ modinfo /lib/firmware/rtl_nic/rtl8168g-2.fw</b><br>
                                        I get<br>
                                        <b class="code1">bash: modinfo: command not found</b><br>
                                        , while kernel module display normally with same command.)
                                    </div>
                                </li>
                                <li>About finding specific firmware, you cant use <b class="code1">aptitude search firmware</b> to show all firmware packages. Notice, single firmware file might include in specific firmware package, for example <b class="code1">rtl_nic/rtl8168g-2.fw</b> is inside <b class="code1">firmware-realtek</b> package.</li>
                                <li>Current PC need to install realtek firmware <b class="code1">rtl_nic/rtl8168g-2.fw</b>, use <b class="code1">aptitude install firmware-realtek</b> to install it.</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </li>
            <li><strong class="lihed">log</strong> : Use <b class="code1"><a href="170722_223101.html#d170808_084719">dmesg</a></b> to check device message. And check <b class="code1">/var/log/</b> (and <b class="code1">/var/log/installer/</b> is log for <b class="code1">debian-installer</b> system message before reboot to "real" system) it might be very helpful to have a clue what problem is going on. _ Maybe this REGEXP pattern <b class="code1">unable|fail|error|warn|!|disable|cant|can't|can not</b> is useful for searching.</li>
            <li><strong class="lihed">live-usb</strong> : The user name and password is : {user ; live}.</li>
            <li><strong class="lihed">Time zone</strong> : [Setting / changing] Timezone is quite simple, just use <b class="code1">dpkg-reconfigure tzdata</b>. Read more at <a href="https://wiki.debian.org/TimeZoneChanges">TimeZoneChanges</a>.</li>
            <li>
                <p><strong class="lihed"><a href="http://smxi.org/">smxi</a></strong> : Don't know if this is useful, I just keep it here. _ <q>smxi is an interactive script designed to help people maintain their systems. It supports Debian based distros.</q></p>
                <div class="cbk1 hide">
                    <p>Smxi is a feature rich, powerful script, and has the following primary features and options :</p>
                    <ul>
                            <li>System Upgrades (dist-upgrade / upgrade)</li>
                            <li>Kernel upgrades / kernel module upgrades</li>
                            <li>Automatated video card driver installation (plus any needed patches), especially non-free drivers like nVidia and AMD/ATI fglrx</li>
                            <li>Installing extra software (including building a desktop/server from scratch, starting with just the base Debian system)</li>
                            <li>Removing certain software</li>
                            <li>Cleaning up your system (cleaning up apt archives, removing kernels/ kernel modules, cleaning system cruft, etc)</li>
                            <li>Tweaking your system, mozilla configurations, installing some small graphics tweaks, etc.</li>
                            <li><q>Check out the script called SMXI. Further down the line it installs the correct graphic driver.</q></li>
                    </ul>
                </div>
            </li>
        </ul>
    </div>
</section>

<section class="section1">
    <h2>USB installation<a class="ancrDest" id="d170722_231432"></a></h2>

    <div class="foldableContent">
        <ul>
            <li><strong class="lihed"><a href="https://www.debian.org/releases/stable/i386/ch04s03.html.en">Debian manual way.</a><a id="d170722_232950" class="ancrDest"></a></strong></li>
            <li><strong class="lihed"><a href="https://wiki.archlinux.org/index.php/USB_flash_installation_media_%28%E6%AD%A3%E9%AB%94%E4%B8%AD%E6%96%87%29">USB flash installation media (正體中文)</a></strong> : This <b class="code1">Arch</b> wiki page demonstrate different approach to install a bootable USB.</li>
            <li><strong class="lihed"><a href="https://wiki.archlinux.org/index.php/Multiboot_USB_drive">Multiboot USB drive</a></strong> : This <b class="code1">Arch</b> wiki page shows the concept of install multiple ISO files to a single device (USB flash drive). The ISO files can be copied to the device and booted directly without unpacking them first. There are multiple methods available, but they may not work for all ISO images. And the drawback of first method is <b class="udr">the original boot menu for the ISO file is not shown</b>, I don't know if this will cause Live USB unusable.</li>
            <li><strong class="lihed"><b class="code1">cp</b>, <b class="code1">dd</b></strong> : See <a href="https://www.debian.org/CD/faq/#write-usb">here</a>. Both this 2 easiest method can be used to write <b class="code1">iso</b> to USB stick.</li>
            <li>
                <p><strong class="lihed">Utility</strong></p>
                <div class="cbk1 hide">
                    <ul>
                        <li>Some utility might get job done easier, without bothering those hassle.</li>
                        <li>
                            <p><strong class="lihed"><b class="code1">UNetbootin.</b></strong></p>
                            <ul>
                                <li><strong class="lihed">Don't use this</strong> : When I try to find Debian package, it is outdate (Now <b class="udr">Stretch</b> (9) is stable realease, but it still using <b class="udr">Wheezy</b> (7)). And inside it's source code tar ball, README file build guide link is broken. _ After I successfully installed old <b class="udr">Wheezy</b> version with <b class="code1">aptitude -t wheezy install unetbootin</b>, and run it, it already report some error but I can still use graphic interface, but when I use <b class="code1">sudo</b>, it show a lot error and can't enter graphic interface. _ And I found it is Ubuntu oriented.</li>
                                <li>See <a href="http://unetbootin.github.io/">homepage</a> and <a href="https://github.com/unetbootin/unetbootin/wiki">wiki</a>. <b class="code1">UNetbootin</b> can using either <b class="udr">[live ISO // normal ISO]</b>, using either <b class="udr">[USB Drive // Hard Disk]</b> install mode, using either <b class="udr">[Windows // Linux // MacOS]</b>, using either <b class="udr">[command line // graphic mode]</b>, is a very good tool. But seems not support multiple ISO??</li>
                                <li><strong class="lihed">[USB Drive install mode // Hard Disk install mode]</b></strong> : <b class="code1"><a href="https://github.com/unetbootin/unetbootin/wiki/installmodes#hard-disk-install-mode">Hard Disk install mode</a></b> doesn't mean it can't used at installing to USB media. This frugal install mode doesn't install a dedicated bootloader and doesn't make a separate partition, but rather piggybacks off the existing OS's bootloader and installs the files for the live environment inside the existing partition. _ <b class="udr">This is what I want</b> even installing in USB flash drive, to avoid wasting available space.</p>
                            </ul>
                        </li>
                        <li><strong class="lihed"><b class="code1">win32diskimager</b></strong> : See <a href="https://www.debian.org/CD/faq/#write-usb">here</a>. Notice <b class="code1">win32diskimager</b> is a Windows tool, when you don't have linux to use.</li>
                    </ul>
                </div>
            </li>
            <li>
                <p><strong class="lihed">Multiple ISO images in one USB.</strong></p>
                <ul>
                    <li><strong class="lihed">See more at <a href="#d170809_133501">Grub section</a>.</strong></li>
                    <li><strong class="lihed"><a href="https://askubuntu.com/questions/46624/how-to-create-a-bootable-usb-with-multiple-iso-images-in-it/518583#518583">Follow this</a></strong></li>
                    <li><strong class="lihed"><a href="https://askubuntu.com/questions/372607/how-to-create-a-bootable-ubuntu-usb-flash-drive-from-terminal/376430#376430">And this.</a></strong></li>
                    <li><strong class="lihed"><a href="#d170722_232950">Debian manual way</a></strong> : I'd try this this method, it works, but it can only run "installation program" not <b class="udr">live USB</b>, I don't knwo how to make USB stick to run <b class="udr">live USB</b> without occupy the whole USB space, so I give up here.</li>
                    <li><strong class="lihed"><a href="https://newtoypia.blogspot.tw/2015/06/grub2-iso.html">[Use <b class="code1">Grub</b> / config <b class="code1">grub.cfg</b>] on USB flash drive, put multiple ISO as you like</a></strong> : <q>貴哥 ... 可以把很多張光碟的映像檔都擠在同一顆開機隨身碟上面嗎? ... 還好有 grub2 可以解決上述所有問題!</q>. _ This article <b class="strong1">help me successfully setting</b> "live ISO disk media" with Grub2 installed!</li>
                </ul>
            </li>
            <li><strong class="lihed">Read content inside <b class="code1">ISO</b> file</strong> : See <b class="code1"><a href="170722_223101.html#d170810_172759">mount</a></b></li>
        </ul>
    </div>
</section>

<section class="section1">
    <h2>[Grub / Grub2 / bootloader]<a class="ancrDest" id="d170809_133501"></a></h2>

    <div class="foldableContent">
        <ul>
            <li>Unless you use <b class="code1">dd</b> to "embed" all iso image into USB stick, you have to [alter / modify / config] the grub settings (specific one is depends on which one you want to used to boot into current target (vmlinuz)) anyway to able to tell the grub to "learn" this new target, or it will not even recognize this target exist. See <a href="#d170808_170152">USB media and HD media</a> section for related info.</li>
            <li><strong class="lihed">[<b class="code1">MBR</b> // <b class="code1">GPT</b>]</a></strong> : <a href="https://en.wikipedia.org/wiki/MBR_partition_table">MBR partition table (Master Boot Record)</a>. <a href="https://zh.wikipedia.org/zh-tw/GUID%E7%A3%81%E7%A2%9F%E5%88%86%E5%89%B2%E8%A1%A8">GUID Partition Table (GPT)]</a>.</li>
            <li><strong class="lihed">About <b class="udr">partitioning</b>, please see <a href="170722_223101.html#d170809_125302">parted</a>.</strong></li>
            <li><strong class="lihed"><a href="https://sites.google.com/site/easylinuxtipsproject/grub#TOC-Adapt-Grub:-make-Windows-the-first-option-in-the-Grub-boot-menu">Grub with motherboard that are UEFI but use BIOS compatible mode.</a></strong></li>
            <li><strong class="lihed"><a href="https://sites.google.com/site/easylinuxtipsproject/6">Grub with motherboard that are UEFI and use full UEFI mode.</a></strong></li>
            <li>
                <p><strong class="lihed"><a href="https://www.gnu.org/software/grub/manual/html_node/index.html">GNU GRUB Manual 2.02.</a></strong> : (<a href="https://www.gnu.org/software/grub/manual/grub.html">single page version</a>)</p>
                <div class="cbk1 hide">
                    <ul>
                        <li><strong class="lihed"><a href="https://www.gnu.org/software/grub/manual/grub.html#Menu-interface">The simple menu interface.</a></strong></li>
                        <li>
                            <p><strong class="lihed">Different and similar concept between <b class="code1">grub.cfg</b> (menu entry) and <b class="udr">Grub interactive shell</b> with examples</strong></p>
                            <ul>
                                <li><a href="https://www.debian.org/releases/stable/amd64/ch05s01.html.en#boot-initrd">5.1.5. Booting from Linux using LILO or GRUB.</a></li>
                                <li><a href="https://www.gnu.org/software/grub/manual/grub.html#GNU_002fLinux">boot GNU/Linux from GRUB with interactive shell.</a></li>
                                <li><a href="https://www.gnu.org/software/grub/manual/grub.html#Command_002dline-and-menu-entry-commands">16.3 The list of command-line and menu entry commands</a>.</li>
                                <li><q><a href="https://wiki.archlinux.org/index.php/GRUB#Using_the_command_shell">In error conditions (e.g. if the partition layout changes) GRUB may fail to boot. When this happens, a command shell (Grub interactive shell) may appear.</a></q></li>
                                <li><a href="https://www.gnu.org/software/grub/manual/grub.html#GRUB-only-offers-a-rescue-shell-1">22.1 GRUB only offers a rescue shell.</a></li>
                            </ul>
                        </li>
                        <li><strong class="lihed"><a href="https://www.gnu.org/software/grub/manual/grub.html#Configuration">6 Writing your own configuration file.</a></strong></li>
                        <li><strong class="lihed"><a href="https://www.gnu.org/software/grub/manual/html_node/Installing-GRUB-using-grub_002dinstall.html">4.1 Installing GRUB using grub-install.</a></strong></li>
                        <li><strong class="lihed"><a href="https://www.gnu.org/software/grub/manual/html_node/Making-a-GRUB-bootable-CD_002dROM.html">4.2 Making a GRUB bootable CD-ROM.</a></strong></li>
                        <li><strong class="lihed"><a href="https://www.gnu.org/software/grub/manual/html_node/Commands.html#Commands">16 The list of available commands.</a></strong></li>
                        <li><strong class="lihed"><a href="https://www.gnu.org/software/grub/manual/html_node/Environment.html#Environment">15 GRUB environment variables.</a></strong></li>
                    </ul>
                </div>
            </li>
            <li><strong class="lihed"><a href="https://wiki.archlinux.org/index.php/GRUB">[GRUB / Arch wiki].</a></strong></li>
            <li><strong class="lihed"><a href="https://wiki.debian.org/Grub">[GRUB / Debian wiki].</a></strong></li>
            <li><strong class="lihed"><a href="http://blog.csdn.net/xiedapang_pang/article/details/56672702"><b class="strong1">[GRUB / GRUB2 配置文件 grub.cfg 詳解]</b></a></strong> : (<a href="https://web.archive.org/web/20170814093133/http://blog.csdn.net/xiedapang_pang/article/details/56672702">Backup</a>). <b class="strong1">Very quality document</b>, including both key info (instead cumbersome) and also detailed info.</li>
            <li>
                <p><strong class="lihed"><b class="strong1"><a href="https://hugh712.gitbooks.io/grub/content/">[GRUB / GRUB架構解析]</a></b></strong> : Another good resource, easy to grasp the key concept, also have advenced explaination.
                <ul>
                    <li><strong class="lihed"><a href="https://hugh712.gitbooks.io/grub/content/test.html">Basic console</a></strong> : These is often used command when you are in console mode.</li>
                    <li><strong class="lihed"><b class="code1"><a href="https://hugh712.gitbooks.io/grub/content/test.html">prefix</a></b><a class="ancrDest" id="d170817_103204"></a></strong> : I successfully boot without this settings. This seems have default settings <b class="code1">set prefix=($root)/boot/grub</b>. _ Also see <a href="https://hugh712.gitbooks.io/grub/content/embedding-a-configuration-file.html">here</a> have a little example of using <b class="code1">prefix</b>.</li>
                    <li><strong class="lihed">grub.cfg can use shell script</strong> : <a href="https://hugh712.gitbooks.io/grub/content/embedding-a-configuration-file.html">Some example</a>.</li>
                </ul>
            </li>
            <li><strong class="lihed"><a href="https://help.ubuntu.com/community/Grub2/ISOBoot#Manually_editing_the_GRUB_files">[GRUB / Ubuntu documentation]</a></strong> : Still, I found <b class="udr">[GRUB / GRUB2 配置文件 grub.cfg 詳解]</b> is better than this.</li>
            <li><strong class="lihed"><b class="code1">Grub</b> package</b></strong> : don't use <b class="code1">aptitude install grub</b> to install grub package, it will install <b class="code1">grub-legacy</b> but not <b class="code1">grub2</b>. Use <b class="code1">aptitude search grub</b> to find correct package, maybe you want <b class="code1">grub-efi-amd64</b> or <b class="code1">grub-efi-pc</b> ...</li>
            <li>
                <p><strong class="lihed"><b class="strong1">Configuration and some key concept.</b></strong></p>
                <div class="cbk1">
                    <ul>
                        <li><strong class="lihed"><a href="https://wiki.archlinux.org/index.php/GRUB#Configuration">[Grub, configuration / Arch wiki].</a></strong></li>
                        <li><strong class="lihed"><a href="https://wiki.archlinux.org/index.php/GRUB/Tips_and_tricks">[Grub, tips and tricks / Arch wiki]</a></strong> : Very detailed.</li>
                        <li><strong class="lihed"><b class="code1">/etc/default/grub</b></strong></li>
                        <li><strong class="lihed"><b class="code1">/etc/grub.d/</b></strong> : See <a href="https://wiki.archlinux.org/index.php/GRUB#Dual-booting">here</a>, it edit <b class="code1">/etc/grub.d/40_custom</b> to change Grub menu entry.</li>
                        <li>
                            <p><strong class="lihed"><b class="code1">/boot/grub/grub.cfg</b></strong></p>
                            <ul>
                                <li>
                                    <p><strong class="lihed">Basic structure and example (simple but not best, demonstration only).</strong></p>
                                    <div class="cbk1 hide">
                                        <p class="pre mono"># begin here: https://wiki.archlinux.org/index.php/Multiboot_USB_drive
# good reference: https://wiki.archlinux.org/index.php/GRUB
# minimal config: https://blog.hartwork.org/?p=1807

# grub-install --no-floppy --boot-directory=/mnt/t1/boot/ /dev/sdb

# https://wiki.archlinux.org/index.php/GRUB#Enable_debug_messages
# set pager=1
# set debug=1

set default=1
set timeout=20

# search --no-floppy --fs-uuid --set=root d7540d3d-066b-40c8-8875-92026d483cdc

#set menu_color_normal=yellow/blue
set menu_color_highlight=blue/yellow

if loadfont /boot/grub/fonts/unicode.pf2 ; then
    insmod all_video
    insmod gfxterm
    insmod png
    insmod jpeg
    set gfxpayload=keep
    terminal_output gfxterm
    background_image /boot/grub/light-dot.jpg
fi

menuentry "treegb, Debian Stretch, Debian GNU/Linux Live (kernel 4.9.0-3-amd64)" {
    insmod part_msdos
    insmod ext4
    insmod iso9660
    set root=(hd0,msdos1)
    set isofile='/debian-live-9.0.1-amd64-gnome.iso'
    loopback loop $isofile
    set loopback="findiso=${isofile}"
    linux (loop)/live/vmlinuz-4.9.0-3-amd64 boot=live components "${loopback}" quiet
    initrd (loop)/live/initrd.img-4.9.0-3-amd64
}</p>
                                    </div>
                                </li>
                                <li><strong class="lihed"><a href="170813_191337.html">grub.cfg on real system example</a></strong> : This is <b class="code1">/boot/grub/grub.cfg</b> file on [real / complete] system, so I can check if I miss somthing when modifying <b class="code1">grub.cfg</b> manually.</li>
                                <li><strong class="lihed"><a href="170813_191338.html"><b class="strong1">grub.cfg on multi ISO bootable disk (partition) backup</b></a></strong> : This is <b class="code1">/boot/grub/grub.cfg</b> file on hard disk partition, which can boot to multiple ISO with this [script/config].</li>
                                <li><strong class="lihed"><a href="https://wiki.debian.org/DebianLive/MultibootISO">[DebianLive / MultibootISO], <b class="udr">for, do, done</b> method</a></strong> : Programing grub.cfg which automatically and recursively get all ISO in the directory, and automatically generate all menuentry. This can works to boot live image, but still use [customise / manual] method to chose [all // needed] menuentry content inside ISO file. <b class="ital">(Debian Live Multiboot ISO)</b>.</li>
                                <li><strong class="lihed"><a href="https://www.supergrubdisk.org/wiki/Loopback.cfg">Loopback.cfg method</a></strong> : This method only need add one menuentry for one ISO, the <b class="code1">configfile</b> command will makes entry menu "jump" from original outside <b class="code1">grub.cfg</b> to <b class="code1">inside</b> ISO (loop), so you actually later see all menuentries inside the ISO image. This can works to boot live image, but still need to manually add one more menuentry for one more ISO added.</li>
                                <li>
                                    <p><strong class="lihed"><b class="code1">insmod</b></strong> : Some module are not necessary to be installed, you can add it when you have new [device // partition table type // file system type] and you have problem to load it.</p>
                                    <div class="cbk1 hide">
                                        <ul>
                                            <li><strong class="lihed"><b class="code1">insmod part_msdos</b>.</strong></li>
                                            <li><strong class="lihed"><b class="code1">insmod ntfs</b>.</strong></li>
                                            <li><strong class="lihed"><b class="code1">insmod ext4</b>.</strong></li>
                                            <li><strong class="lihed"><b class="code1">insmod iso9660</b>.</strong></li>
                                            <li><strong class="lihed"><b class="code1">insmod part_gpt</b>.</strong></li>
                                        </ul>
                                    </div>
                                </li>
                                <li><strong class="lihed"><b class="code1">set</b></strong> : Don't know why using this keyword <b class="code1">set</b>, I tried with may command includ <b class="code1">root=</b>, <b class="code1">prefix=</b> witout <b class="code1">set</b> and it still works well. I see GNU manual there is no document about <b class="code1">set</b>. I google <b class="code1">set</b> buildin command of <b class="code1">bash</b> everywhere, there is no common needed of this command, (but <b class="code1">export</b> is much common and useful). _ The conclusion is I don't know why use <b class="code1">set</b> before some variable, it works fine even I don't use it, but I will keep the practice with some common usage like <b class="code1">set root=</b>, <b class="code1">set prefix=</b>, other variables is not needed at all.</li>
                                <li><strong class="lihed"><b class="code1">set default=1</b></strong> : 默認選中第幾個菜單項（從“0”開始計數）.</li>
                                <li><strong class="lihed"><b class="code1">set timeout=20</b></strong> : 20 sec delay before auto enter first entry.</li>
                                <li>
                                    <p><strong class="lihed">文件的命名方法, [絕對 // 相對] 路徑表示法舉例.</strong></p>
                                    <ul>
                                        <li><strong class="lihed">(fd0)/grldr</strong> : 第一軟盤根目錄下的 “grldr” 文件[絕對路徑]</li>
                                        <li><strong class="lihed">(hd0,gpt1)/boot/vmlinuz</strong> : 第一硬盤的第一GPT分區 “boot” 目錄下的 “vmlinuz” 文件[絕對路徑]</li>
                                        <li><strong class="lihed">/boot/vmlinuz</strong> : 根設備 “boot” 目錄下的 “vmlinuz” 文件[相對路徑]，當 “根” 環境變量等於 “(hd0，gpt1)” 時，等價於 “(hd0，gpt1)/vmlinuz”</li>
                                        <li><strong class="lihed"><b class="code1">hd0</b> is special!</strong> : Remember, if you use <b class="udr">quick boot selection menu</b> (some motherboard use F8 key) in boot time, <b class="code1">hd0</b> exceptionally always mean <b class="udr">seleted device</b>, not first detected device, disregarding what sequence this device it actually is in [BIOS // UEFI] order. The rest of device remain normal, will follow the normal sequence.</li>
                                    </ul>
                                </li>
                                <li>
                                    <p><strong class="lihed">文件的命名方法, 設備與分區.</strong></p>
                                    <ul>
                                        <li><strong class="lihed">(hd1,1)</strong> : 第二硬盤的第一分區（通用於MBR與GPT分區）</li>
                                        <li><strong class="lihed">(hd1,msdos5)</strong> : 第二硬盤的第五MBR分區，也就是第一個邏輯分區</li>
                                        <li><strong class="lihed">(hd0,gpt1)</strong> : 第一硬盤的第一分區GPT</li>
                                    </ul>
                                </li>
                                <li><strong class="lihed"><b class="code1">search [--file|--label|--fs-uuid] [--set [var]] [--no-floppy] name</b></strong> : For e.g. <b class="code1">search --fs-uuid --set=root d7540d3d-066b-40c8-8875-92026d483cdc</b>. 通過文件[--file]，卷標[--label]，文件系統UUID[--FS-UUID]來查找設備。如果使用了 --set 選項，那麼會將第一個找到的設備設置為環境變量“var”的值。默認的“var”是“root”。 Maybe this is another way to set root, without specify relative location of boot sequence.</li>
                                <li>
                                    <p><strong class="lihed"><b class="code1">set root=...</b><a class="ancrDest" id="d170817_042641"></a></strong></p>
                                    <ul>
                                        <li>For example <b class="code1">set root=(hd0,msdos1)</b> (don't sufix <b class="code1">/</b>, because other variable which concatenate with <b class="code1">root</b> might use prefix <b class="code1">/</b>).</li>
                                        <li>see more at previous section <b class="udr">文件的命名方法, 設備與分區</b> in this page.</li>
                                        <li>Specify <b class="code1">root</b> like this <b class="code1">configfile <b class="strong1">(hd2,4)</b>/iso/livecdimage.cfg</b> is legit, but this will not change global <b class="code1">root</b> variable.</li>
                                        <li>You can change root as you want in any location of config, if your target ISO is at different [device / partition], and later operation will be more convinient, you don't need to specify root at the begining of each path, like above command.</li>
                                    </ul>
                                </li>
                                <li><strong class="lihed"><b class="code1">set prefix=...</b></strong> : The defualt setting is <b class="code1">set prefix=($root)/boot/grub</b> (no sufix <b class="code1">/</b>), but even <b class="code1">root</b> changes</b>, default <b class="code1">prefix</b> will not change again. <b class="code1">prefix</b> will determine basic directory where Grub require some data like modules files. Don't change this directory to other location <b class="udr">even you change <b class="code1">root</b></b>, <b class="udr">even you use <b class="code1">loop</b> and <b class="code1">configfile</b> get inside ISO loop</b>, or Grub will probably fail to load module (not a big problem though, just change it back).</li>
                                <li><strong class="lihed"><b class="code1">set isofile=&lt;iso path&gt;</b></strong> : You don't need to use <b class="code1">isofile</b> it is just a arbitrary variable name! For example <b class="code1">set isofile='/debian-live-9.0.1-amd64-gnome.iso'</b>. _ <b class="udr">I think</b> if you change root again (<b class="code1">set root=...</b>), the meaning of this path will change again too.</li>
                                <li><strong class="lihed"><b class="code1">loopback loop $isofile</b></strong> : I means mount the iso file, so you can [use / specify] inside Kernel later. _ I found <a href="">here</a> using <b class="code1">loopback loop (hd0,1)$isofile</b>, so I get these conclusion 1. no need offer <b class="code1">msdos</b> partition table type 2. This is another way to specify root other than <b class="code1">set root=...</b> method.</li>
                                <li><strong class="lihed"><b class="code1">set loopback="findiso=${isofile}"</b></strong> : You don't need to use <b class="code1">loopback</b> it is just a arbitrary variable name! <b class="code1">findiso=${isofile}</b> will needed in later <b class="code1">linux</b> command argument (at least for Debian).</li>
                                <li>
                                    <p><strong class="lihed"><b class="code1">linux</b> argument.</strong></p>
                                    <div class="cbk1 hide">
                                        <ul>
                                            <li>
                                                <p><strong class="lihed">如何使用 GRUB2引導（硬盤安裝）Debian LiveCD 的 ISO 文件？</strong> : 首先需要說明的是，這裡給出的方法，只適用於提供了 <b class="strong1">“iso-scan/filename=” 或 “fromiso=” 或 “isoboot=” 或 “isoloop=”</b> <b class="ital">(no "findiso=" ?)</b> 之類參數的LiveCD的。</p>
                                                <p>下面以 “Debian 8.6 LiveCD” 為例說明。首先，假定你將 ISO 文件放在 '(hd0,gpt3)/ISO/Debian.iso' ; 然後，在 'grub.cfg' 中加入如下菜單項：</p>
                                                <div class="cbk1">
                                                    <p class="pre mono">menuentry "Debian 8.6 LiveCD" --unrestricted {
        loopback loop0 (hd0,gpt3)/ISO/Debian.iso
        linux  (loop0)/live/vmlinuz boot=live fromiso=/dev/sda3/ISO/Debian.iso
        initrd (loop0)/live/initrd.img
    }</p>
                                                </div>
                                                <p>[說明]這裡給出的方法，其實就是各種 “硬盤安裝XX Linux” 的翻版，只不過不再需要將 “vmlinuz” 與 “initrd” 從 ISO 中解壓出來而已。更多其它發行版的實例，請繼續閱讀下面的內容。</p>
                                            </li>
                                            <li><strong class="lihed"><b class="code1">(loop)/live/vmlinuz-4.9.0-3-amd64</b></strong> : kernel path. <b class="code1">(loop)</b> here means use kernel inside ISO (in previous step we had loop mount this).</li>
                                            <li><strong class="lihed"><b class="code1">"${loopback}"</b></strong> : = previous <b class="code1">findiso=${isofile}</b>.</li>
                                            <li><strong class="lihed"><b class="code1">boot=live</b></strong> : If you want to directly boot inside ISO kernel which used for live environment, this seems necessary. But I'm not very sure about this argument.</li>
                                            <li><strong class="lihed"><b class="code1">components</b></strong> : Not sure. I'd try to remove this and it still works to boot inside ISO kernel which used for live environment.</li>
                                            <li><strong class="lihed"><b class="code1"><a href="https://youtu.be/xf2CYSUXVh8?t=2m48s">iso-scan/filename=&lt;iso-path&gt;</a></b></strong> : ? not sure why use this. I think this might (or might not) be Ubuntu specific.</li>
                                            <li><strong class="lihed">Other Kernel Parameter</strong> : More other Kernel Parameter, document, please see <a href="#d170808_074846">here</a>. It is not possible to list all Kernel Paramenters because the range is too wide.</li>
                                        </ul>
                                    </div>
                                </li>
                                <li><strong class="lihed"><b class="code1">initrd</b></strong> : Seems don't need any extra argument except initrd.gz path.</li>
                                <li><strong class="lihed">Change screen resolution</strong> : Set <b class="code1">gfxmode</b> (someone said <b class="code1">GRUB_GFXMODE</b>. _ Go to <b class="udr">grub interactive shell</b> first, use <b class="code1">vbeinfo</b> to check all available resolution, and later write that resolution into <b class="code1">grub.cfg</b>, e.g. <b class="code1">gfxmode=1024x768</b>, when next time you boot it will effect. Also people suggest use <b class="code1">gfxpayload=keep</b> together. _ There is another argument <b class="code1">vga</b>, but I'm not sure what it does.</li>
                            </ul>
                        </li>
                        </li>
                        <li><strong class="lihed"><b class="code1">update-grub</b></strong> : See <a href="https://hugh712.gitbooks.io/grub/content/configuration-files.html">here, 組態結構</a>.</li>
                        <li><strong class="lihed"><b class="code1">grub-mkconfig</b></strong></li>
                        <li><strong class="lihed"><b class="code1">grub-mkrescue</b></strong> : I will not need this, but just for more info. - <q>如上面所看到的，產生了一個『grub.iso』，接下來你就可以把這個image給燒入CD-ROM或是USB裡面以後，放入相關媒體重新開機後，你的機器一開始應該就會讀到了。<cite><a href="https://hugh712.gitbooks.io/grub/content/making-a-grub-bootable-cd-rom.html">建立可啟動的CD-ROM GRUB image.</a></cite</q></li>
                        <li>
                            <p><strong class="lihed"><b class="code1">grub-install</b></strong> : Install Grub on a system without Grub pre-install (new system) or MBR been overwrite by Windows. See <a href="https://wiki.archlinux.org/index.php/GRUB">here</a>. And also see <b class="strong1"><a href="https://wiki.archlinux.org/index.php/Multiboot_USB_drive">here</b> (<a href="https://wiki.archlinux.org/index.php/Multiboot_USB_drive#Installing_GRUB">this section</a>) to see the flexable usage (install on USB flash drive and with custom path) of <b class="code1">grub-install</b>.</p>
                            <p>Notice it is not easy (and probably not "legit" method?) to install grub on empty disk (no OS on it) even you use <b class="code1 mono">grub-install --boot-directory=/mnt/your-empty-disk-root/boot/ --force /dev/your-empty-disk</b>. Even you can do it (remember to use <b class="code1 mono">--force</b> to force install even error occurs), I found I have no <b class="udr">grub.cfg</b> file to use after previous command becuase it need <b class="udr">update-grub</b> to [generate / update] it or maybe <b class="code1 mono">grub-mkconfig -o /boot/grub/grub.cfg</b> will create a new<b class="code1">grub.cfg</b> for me? So the conclusion is I <b class="strong1">can</b> install grub on empty disk, but it is probably <b class="strong1">not "legit"</b> method?. But some people use <b class="code1">chroot</b> method to do it and works. _ See info more at <b class="code1 strong1"><a href="170722_223101.html#d170810_144512">chroot</a></b> about installing Grub.</p>
                            <p><a href="https://www.gnu.org/software/grub/manual/html_node/Invoking-grub_002dmkconfig.html#Invoking-grub_002dmkconfig">This</a> and <a href="https://unix.stackexchange.com/questions/72592/chroot-in-to-reinstall-grub2-reinstall-mnt-is-empty#72599">this</a>, said you can use <b class="code1 mono">grub-mkconfig -o /boot/grub/grub.cfg</b> to buid config file?</p>
                            <p>And I found <a href="https://youtu.be/Q5CaJRpmpLI">this good video</a>, it show copying legit grub config <b class="udr">source</b> file like htis</p>
                            <div class="cbk1">
                                <p>(Use <b class="code1">mkdir -p</b> to build required directory respectively.)
                                cp -a /etc/default/grub /mnt/newUsbPartition/etc/default/<br>
                                cp -a /etc/grub.d/ /mnt/newUsbPartition/etc/<br>
                                grub-install --boot-directory=/mnt/newUsbPartition/ /dev/newUsbDevice<br>
                                <b class="strong1">grub-mkconfig</b> -o /mnt/newUsbPartition/boot/grub/grub.cfg</p>
                            </div>
                            <p>, from <b class="udr">normal OS</b> to backup <b class="udr">USB (or hard disk)</b>, and if Grub in your <b class="udr">normal OS</b> broke, you can use this <b class="udr">USB (or hard disk)</b> to boot into your <b class="udr">normal system</b>. But I think same problem here, <b class="code1">grub-mkconfig</b> alaways get source (config file) from you current OS too?</p>
                            <p>In [UEFI / GPT] system you need to use <b class="code1 mono">--efi-directory=/mnt/target/EFI/BOOT</b>.</p>
                        </li>
                    </ul>
                </div>
            </li>
            <li>
                <p><strong class="lihed">Grub shell (grub interactive mode).</strong></p>
                <ul>
                    <li><strong class="lihed">Apply in real time</strong> : Always remember <b class="udr">grub interactive shell</b> will apply the action in real time, not like static <b class="code1">grub.cfg</b>, you have to [set / type] variable or command one by one, a [command / variable] canged might effect later action, for example you first change <b class="code1">root</b> in <b class="udr">grub interactive shell</b> but when you later go back to a menuentry, which don't set <b class="code1">root</b> back to correct location (because the script might already set root before each menuentry), you will get wrong <b class="code1">root</b> settings if you execute that <b class="code1">grub.cfg</b>.</li>
                    <li><strong class="lihed">Auto completion</strong> : In <b class="udr">grub interactive shell</b> or <b class="code1">grub.cfg</b>, <b class="code1">Tab</b> key will works, but like previous saying, the status is action in real time, it only effect you have right environment especially in <b class="code1">grub.cfg</b> you sometimes get confused, for example, if you want to auto complete the full path name under <b class="udr">grub.cfg</b>, you have to switch to <b class="udr">grub interactive shell</b> first, set <b class="code1">root</b> to correct one, then get back to <b class="code1">grub.cfg</b> and the auto completion will be correct. You can use (hd0, msdos1) prefix too it might be quicker. Also make sure have one space before a path name or auto completion will not work.</li>
                    <li><strong class="lihed">How to scroll in grub shell?</strong> : <a href="https://superuser.com/questions/504887/how-to-scroll-in-grub2-shell">set pager=1</a>. Now <b class="code1">cat</b> is much easier to use</li>
                    <li><strong class="lihed"><a href="https://hugh712.gitbooks.io/grub/content/test.html">Basic console</a></strong>.</li>
                    <li><strong class="lihed"><b class="code1">cat</b>.</strong></li>
                    <li><strong class="lihed"><b class="code1">boot</b></strong> : Boot the system. In <b class="code1">grub.cfg</b> you don't need <b class="code1">boot</b>.</li>
                </ul>
            </li>
            <li><strong class="lihed">GPT problem</strong> : I note at <b class="code1"><a href="170722_223101.html#d170809_131918">parted</a></b>.</li>
            <li><strong class="lihed">chain-load</strong> : Chain loading is only needed if you have proprietary OS (Windows, Mac) that GRUB can't directly handle.</li>
            <li><strong class="lihed"><b class="code1">multiboot</b></strong> : <q>I want to edit the 'primary' GRUB 2, to show the boot option for 'secondary' GRUB2 on another HDD drive in the computer, how can I do this? ... User 'franzb' has posted the solution to this question, just use <b class="code1">multiboot</b>.<cite>See <a href="https://ubuntuforums.org/showthread.php?t=1682253&page=3&p=10439004#post10439004">here</a> and <a href="https://hugh712.gitbooks.io/grub/content/multi-boot-manual-config.html">here</a>.</cite></q></li>
            <li>
                <p><strong class="lihed"><b class="code1">configfile</b></strong></p>
                <ul>
                    <li><q>而如果你有兩個版本以上的Ubnutu或是多種的作業系統安裝的話，最好就不要使用chainloading，而是要在『/etc/grub.d/40_custom』加入像底下這樣子的entry : ... <b class="code1 mono">configfile /boot/grub/grub.cfg</b>.<cite>See <a href="https://hugh712.gitbooks.io/grub/content/multi-boot-manual-config.html">here</a>.</cite></q></li>
                    <li><a href="https://hugh712.gitbooks.io/grub/content/embedding-a-configuration-file.html">A practical example.</a></li>
                    <li>Don't mistype like this <b class="code1">configfile=/boot/grub/grub.cfg</b>.</li>
                    <li>When you want to retrieve the full menuentry of <b class="code1">grub.cfg</b> in inside ISO content, you can use <b class="code1">configfile</b>, but here you need to know a key setting - use <b class="code1">export iso_path=&lt;/your/iso/file&gt;</b> before <b class="code1">configfile</b>, watching (loop) inside <b class="code1">grub.cfg</b> file, you see the script try to detect variable <b class="code1">iso_path</b>. So use <b class="code1">export iso_path=&lt;/your/iso/file&gt;</b> (e.g. <b class="code1">export iso_path='/iso/debian-live-9.0.1-amd64-gnome.iso'</b>) to [export/keep] this variable.</li>
                    <li>I think <b class="code1">configfile</b> is not a "chroot" function, it just source another script, but doesn't fully get inside the environment. Seems there is no way to "chroot" to live ISO.</li>
                </ul>
            </li>
            <li><strong class="lihed">How to edit <b class="code1">grub.cfg</b> when the partition is mount with read-only</strong> : When you have a custom bootable ISO hard disk (partition) with Grub install and have <b class="code1">grub.cfg</b> cofigured, and you boot with that partition, later you get inside the system but you found that partition is mount with read-only and you can't edit <b class="code1">grub.cfg</b>. Solution is you have to [select / use] other ISO in different partition when boot (with grub menu), don't use the ISO which are at same location of the partition your <b class="code1">grub.cfg</b> is. See <a href="#d170817_042641">set root=...</a>.</li>
            <li><strong class="lihed">[Dealing <b class="code1">Grub</b> with multiple OS / should I install grub again when I am installing the 2nd OS?]</strong> : See <a href="http://www.linuxquestions.org/questions/linux-newbie-8/grub-bootloader-4175610586/">this thread</a>, including discussion about run <b class="code1">update-grub</b> with rescue USB stick and it will auto detect all OS on same disk and fix broken Grub.</li>
            <li><strong class="lihed"><a href="https://sites.google.com/site/easylinuxtipsproject/tips#TOC-Make-Windows-the-default-option-in-the-Grub-boot-menu">Make Windows the default option in the Grub boot menu</a></strong> : (I guess this work for any OS).</li>
        </ul>
    </div>
</section>

<section class="section1">
    <h2>Nav<a class="ancrDest" id="d170722_224712"></a></h2>

    <div class="foldableContent">
        <iframe class="ifrmRefDest" src="170721_194101.html"></iframe>
    </div>
</section>



<script type="text/javascript" src="../js/js_coreNote_001.js"></script>

</body>
</html>
